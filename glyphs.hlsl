// MATRIX GLYPH DEFINITIONS
// 16 Katakana-inspired characters for authentic Matrix rain
// Each glyph is 5 wide × 7 tall, encoded as 35 bits in a uint
// Bit layout: row-major, bottom-to-top, left-to-right
// Bit 0 = bottom-left, Bit 34 = top-right

// Visual key: █ = 1 (lit), ░ = 0 (dark)

// Glyph 0: ア (A) - Katakana style
// ░█░█░  = 01010 = 10
// ░░█░░  = 00100 = 4
// ░░█░░  = 00100 = 4
// ░█░█░  = 01010 = 10
// █░░░█  = 10001 = 17
// █░░░█  = 10001 = 17
// ░███░  = 01110 = 14
// Encoded bottom-to-top: 14, 17, 17, 10, 4, 4, 10
// = 0b 01010_00100_00100_01010_10001_10001_01110
// = (10<<30)|(4<<25)|(4<<20)|(10<<15)|(17<<10)|(17<<5)|14

// Glyph 1: イ (I) style
// █░░░░  = 10000 = 16
// ░█░░░  = 01000 = 8
// ░░█░░  = 00100 = 4
// ░░░█░  = 00010 = 2
// ░░░░█  = 00001 = 1
// ░░█░░  = 00100 = 4
// ░░█░░  = 00100 = 4

// Glyph 2: ウ (U) style
// ░███░  = 01110 = 14
// █░░░█  = 10001 = 17
// █░░░█  = 10001 = 17
// █░░░░  = 10000 = 16
// █░░░░  = 10000 = 16
// █░░░░  = 10000 = 16
// █████  = 11111 = 31

// Glyph 3: エ (E) style
// █████  = 11111 = 31
// ░░█░░  = 00100 = 4
// ░░█░░  = 00100 = 4
// ░░█░░  = 00100 = 4
// ░░█░░  = 00100 = 4
// ░░█░░  = 00100 = 4
// █████  = 11111 = 31

// Glyph 4: オ (O) style
// ░░█░░  = 00100 = 4
// █████  = 11111 = 31
// ░░█░░  = 00100 = 4
// ░░█░█  = 00101 = 5
// ░░█░█  = 00101 = 5
// ░█░░█  = 01001 = 9
// █░░░█  = 10001 = 17

// Glyph 5: カ (Ka) style
// ░██░░  = 01100 = 12
// █░░█░  = 10010 = 18
// ░░░█░  = 00010 = 2
// ░░█░░  = 00100 = 4
// ░█░░░  = 01000 = 8
// █░░░░  = 10000 = 16
// █████  = 11111 = 31

// Glyph 6: キ (Ki) style
// ░░█░░  = 00100 = 4
// █████  = 11111 = 31
// ░░█░░  = 00100 = 4
// █████  = 11111 = 31
// ░░█░░  = 00100 = 4
// ░░█░░  = 00100 = 4
// ░░█░░  = 00100 = 4

// Glyph 7: ク (Ku) style
// ░███░  = 01110 = 14
// █░░░█  = 10001 = 17
// ░░░░█  = 00001 = 1
// ░░░█░  = 00010 = 2
// ░░█░░  = 00100 = 4
// ░█░░░  = 01000 = 8
// █░░░░  = 10000 = 16

// Glyph 8: ケ (Ke) style
// ░░░░█  = 00001 = 1
// ░░░█░  = 00010 = 2
// █████  = 11111 = 31
// ░░█░░  = 00100 = 4
// ░█░░░  = 01000 = 8
// █░░░░  = 10000 = 16
// █░░░░  = 10000 = 16

// Glyph 9: コ (Ko) style
// █████  = 11111 = 31
// ░░░░█  = 00001 = 1
// ░░░░█  = 00001 = 1
// ░░░░█  = 00001 = 1
// ░░░░█  = 00001 = 1
// ░░░░█  = 00001 = 1
// █████  = 11111 = 31

// Glyph 10: サ (Sa) style
// ░█░█░  = 01010 = 10
// ░█░█░  = 01010 = 10
// █████  = 11111 = 31
// ░█░█░  = 01010 = 10
// ░░░█░  = 00010 = 2
// ░░█░░  = 00100 = 4
// ░█░░░  = 01000 = 8

// Glyph 11: シ (Shi) style
// █░░░░  = 10000 = 16
// ░░█░░  = 00100 = 4
// ░░░░█  = 00001 = 1
// ░░░░░  = 00000 = 0
// █░░░█  = 10001 = 17
// ░█░█░  = 01010 = 10
// ░░█░░  = 00100 = 4

// Glyph 12: Number 7 style
// █████  = 11111 = 31
// ░░░░█  = 00001 = 1
// ░░░█░  = 00010 = 2
// ░░█░░  = 00100 = 4
// ░█░░░  = 01000 = 8
// ░█░░░  = 01000 = 8
// ░█░░░  = 01000 = 8

// Glyph 13: Symbol ╋ style
// ░░█░░  = 00100 = 4
// ░░█░░  = 00100 = 4
// █████  = 11111 = 31
// ░░█░░  = 00100 = 4
// █████  = 11111 = 31
// ░░█░░  = 00100 = 4
// ░░█░░  = 00100 = 4

// Glyph 14: ム (Mu) style
// ░░█░░  = 00100 = 4
// ░░█░░  = 00100 = 4
// ░█░█░  = 01010 = 10
// ░█░█░  = 01010 = 10
// █░░░█  = 10001 = 17
// █░░░█  = 10001 = 17
// █░░░█  = 10001 = 17

// Glyph 15: ヨ (Yo) style
// █████  = 11111 = 31
// ░░░░█  = 00001 = 1
// █████  = 11111 = 31
// ░░░░█  = 00001 = 1
// █████  = 11111 = 31
// ░░░░█  = 00001 = 1
// █████  = 11111 = 31

// ============================================================
// COMPUTED GLYPH CONSTANTS
// Formula: (row6<<30)|(row5<<25)|(row4<<20)|(row3<<15)|(row2<<10)|(row1<<5)|row0
// ============================================================

static const uint GLYPHS[16] = {
    // Glyph 0: ア - rows bottom-to-top: 14,17,17,10,4,4,10
    ((10u<<30)|(4u<<25)|(4u<<20)|(10u<<15)|(17u<<10)|(17u<<5)|14u),   // 0x28842231E

    // Glyph 1: イ - rows: 4,4,1,2,4,8,16
    ((16u<<30)|(8u<<25)|(4u<<20)|(2u<<15)|(1u<<10)|(4u<<5)|4u),       // イ diagonal

    // Glyph 2: ウ - rows: 31,16,16,16,17,17,14
    ((14u<<30)|(17u<<25)|(17u<<20)|(16u<<15)|(16u<<10)|(16u<<5)|31u), // ウ style

    // Glyph 3: エ - rows: 31,4,4,4,4,4,31
    ((31u<<30)|(4u<<25)|(4u<<20)|(4u<<15)|(4u<<10)|(4u<<5)|31u),      // エ (工)

    // Glyph 4: オ - rows: 17,9,5,5,4,31,4
    ((4u<<30)|(31u<<25)|(4u<<20)|(5u<<15)|(5u<<10)|(9u<<5)|17u),      // オ style

    // Glyph 5: カ - rows: 31,16,8,4,2,18,12
    ((12u<<30)|(18u<<25)|(2u<<20)|(4u<<15)|(8u<<10)|(16u<<5)|31u),    // カ style

    // Glyph 6: キ - rows: 4,4,4,31,4,31,4
    ((4u<<30)|(31u<<25)|(4u<<20)|(31u<<15)|(4u<<10)|(4u<<5)|4u),      // キ style

    // Glyph 7: ク - rows: 16,8,4,2,1,17,14
    ((14u<<30)|(17u<<25)|(1u<<20)|(2u<<15)|(4u<<10)|(8u<<5)|16u),     // ク style

    // Glyph 8: ケ - rows: 16,16,8,4,31,2,1
    ((1u<<30)|(2u<<25)|(31u<<20)|(4u<<15)|(8u<<10)|(16u<<5)|16u),     // ケ style

    // Glyph 9: コ - rows: 31,1,1,1,1,1,31
    ((31u<<30)|(1u<<25)|(1u<<20)|(1u<<15)|(1u<<10)|(1u<<5)|31u),      // コ style

    // Glyph 10: サ - rows: 8,4,2,10,31,10,10
    ((10u<<30)|(10u<<25)|(31u<<20)|(10u<<15)|(2u<<10)|(4u<<5)|8u),    // サ style

    // Glyph 11: シ - rows: 4,10,17,0,1,4,16
    ((16u<<30)|(4u<<25)|(1u<<20)|(0u<<15)|(17u<<10)|(10u<<5)|4u),     // シ style

    // Glyph 12: 7 - rows: 8,8,8,4,2,1,31
    ((31u<<30)|(1u<<25)|(2u<<20)|(4u<<15)|(8u<<10)|(8u<<5)|8u),       // 7 style

    // Glyph 13: ╋ - rows: 4,4,31,4,31,4,4
    ((4u<<30)|(4u<<25)|(31u<<20)|(4u<<15)|(31u<<10)|(4u<<5)|4u),      // Cross

    // Glyph 14: ム - rows: 17,17,17,10,10,4,4
    ((4u<<30)|(4u<<25)|(10u<<20)|(10u<<15)|(17u<<10)|(17u<<5)|17u),   // ム style

    // Glyph 15: ヨ - rows: 31,1,31,1,31,1,31
    ((31u<<30)|(1u<<25)|(31u<<20)|(1u<<15)|(31u<<10)|(1u<<5)|31u)     // ヨ style
};

// ============================================================
// GLYPH LOOKUP FUNCTION
// ============================================================
// Usage: float pixel = getGlyphPixel(glyph_index, local_uv);
// glyph_index: 0-15
// local_uv: position within character cell (0-1)

float getGlyphPixel(int glyph_idx, float2 local_uv) {
    // Clamp to valid range
    glyph_idx = glyph_idx & 15;  // Modulo 16

    // Get pixel position in 5x7 grid
    int px = int(local_uv.x * 5.0);
    int py = int(local_uv.y * 7.0);

    // Clamp to grid bounds
    px = clamp(px, 0, 4);
    py = clamp(py, 0, 6);

    // Calculate bit index (row-major, bottom-to-top)
    int bit_idx = py * 5 + px;

    // Extract bit from glyph data
    uint glyph_data = GLYPHS[glyph_idx];
    return float((glyph_data >> bit_idx) & 1u);
}
